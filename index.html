<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¸”ë¡œê·¸ ì¸ë„¤ì¼ ë©”ì´ì»¤ PRO</title>
    <!-- êµ¬ê¸€ í°íŠ¸ ë° ì›¹í°íŠ¸ ì¶”ê°€ -->
    <link href="https://fonts.googleapis.com/css2?family=Black+Han+Sans&family=Do+Hyeon&family=Jua&family=Nanum+Myeongjo:wght@700;800&family=Noto+Sans+KR:wght@100;400;700;900&display=swap" rel="stylesheet">
    <style>
        /* ê¸°ì¡´ ë‚˜ëˆ”ìŠ¤í€˜ì–´ ë„¤ì˜¤ */
        @font-face {
            font-family: 'NanumSquareNeo';
            src: url(https://hangeul.pstatic.net/hangeul_static/webfont/NanumSquareNeo/NanumSquareNeoTTF-aLt.woff2);
            font-weight: 300; font-display: swap;
        }
        @font-face {
            font-family: 'NanumSquareNeo';
            src: url(https://hangeul.pstatic.net/hangeul_static/webfont/NanumSquareNeo/NanumSquareNeoTTF-bRg.woff2);
            font-weight: 400; font-display: swap;
        }
        @font-face {
            font-family: 'NanumSquareNeo';
            src: url(https://hangeul.pstatic.net/hangeul_static/webfont/NanumSquareNeo/NanumSquareNeoTTF-cBd.woff2);
            font-weight: 700; font-display: swap;
        }
        @font-face {
            font-family: 'NanumSquareNeo';
            src: url(https://hangeul.pstatic.net/hangeul_static/webfont/NanumSquareNeo/NanumSquareNeoTTF-dEb.woff2);
            font-weight: 800; font-display: swap;
        }
        @font-face {
            font-family: 'NanumSquareNeo';
            src: url(https://hangeul.pstatic.net/hangeul_static/webfont/NanumSquareNeo/NanumSquareNeoTTF-eHv.woff2);
            font-weight: 900; font-display: swap;
        }

        /* Gë§ˆì¼“ ì‚°ìŠ¤ (ëˆˆëˆ„) */
        @font-face {
            font-family: 'GmarketSansBold';
            src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_2001@1.1/GmarketSansBold.woff') format('woff');
            font-weight: normal; font-style: normal;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'NanumSquareNeo', sans-serif; background: #f5f5f5; padding: 20px; min-height: 100vh; }
        .container { max-width: 1200px; margin: 0 auto; display: grid; grid-template-columns: 1fr 1fr; gap: 30px; align-items: start; }
        .panel { background: white; padding: 30px; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h1 { font-size: 24px; margin-bottom: 30px; font-weight: 900; color: #333; }
        .control-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; font-weight: 700; color: #555; font-size: 14px; }
        textarea { width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-family: inherit; font-size: 16px; resize: vertical; min-height: 100px; transition: border-color 0.3s; }
        textarea:focus { outline: none; border-color: #00e676; }
        input[type="color"] { width: 46px; height: 40px; border: 2px solid #e0e0e0; border-radius: 10px; cursor: pointer; padding: 0; background: transparent; }
        .color-input { width: 105px; height: 40px; padding: 8px; border: 2px solid #e0e0e0; border-radius: 10px; text-align: center; font-family: 'Courier New', monospace; font-size: 14px; font-weight: 700; text-transform: uppercase; }
        .palette-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-top: 10px; }
        .palette-btn { width: 100%; height: 50px; border: 3px solid #e0e0e0; border-radius: 8px; cursor: pointer; transition: all 0.2s; }
        .palette-btn:hover { transform: scale(1.05); border-color: #333; }
        input[type="range"] { width: 100%; height: 6px; background: #e0e0e0; border-radius: 3px; outline: none; }
        .range-group { display: flex; align-items: center; gap: 10px; }
        .range-value { min-width: 50px; text-align: right; font-weight: 700; color: #666; }
        .color-group { display: flex; gap: 15px; align-items: center; flex-wrap: wrap; }
        .color-item { display: flex; flex-direction: column; align-items: center; gap: 6px; }
        .color-row { display: flex; align-items: center; gap: 8px; }
        .select { width: 100%; height: 44px; padding: 10px 12px; border: 2px solid #e0e0e0; border-radius: 10px; font-family: inherit; font-size: 14px; font-weight: 700; color: #333; background: white; cursor: pointer; }
        .select:focus { outline: none; border-color: #00e676; }
        .align-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        .preview-panel { position: sticky; top: 20px; }
        #preview-canvas { width: 100%; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.15); margin-bottom: 20px; }
        button { flex: 1; padding: 15px; border: none; border-radius: 8px; font-family: inherit; font-size: 16px; font-weight: 700; cursor: pointer; transition: all 0.3s; }
        .btn-download { background: #00e676; color: #000; }
        .btn-reset { background: #ff5252; color: white; }
        .alt-tag { margin-top: 15px; padding: 15px; background: #f5f5f5; border-radius: 8px; border-left: 4px solid #00e676; }
        .alt-tag-label { font-size: 12px; color: #666; margin-bottom: 8px; font-weight: 700; }
        .alt-tag-text { font-size: 14px; color: #333; word-break: break-all; }
        @media (max-width: 968px) { .container { grid-template-columns: 1fr; } .preview-panel { position: static; } }
    </style>
</head>
<body>
    <div class="container">
        <div class="panel">
            <h1>ğŸ“ ì¸ë„¤ì¼ ì„¤ì •</h1>

            <div class="control-group">
                <label>ì¸ë„¤ì¼ ë¬¸êµ¬</label>
                <textarea id="text-input" placeholder="ë¬¸êµ¬ë¥¼ ì…ë ¥í•˜ì„¸ìš”">PSN ì¹´ë“œ&#10;ì˜¤ë¥˜ ë!&#10;ì§€ê¸ˆ ëëƒ„</textarea>
            </div>

            <!-- í°íŠ¸ ì„ íƒ ì¶”ê°€ -->
            <div class="control-group">
                <label>í°íŠ¸ ì¢…ë¥˜</label>
                <select id="font-family" class="select">
                    <option value="'NanumSquareNeo', sans-serif">ë‚˜ëˆ”ìŠ¤í€˜ì–´ ë„¤ì˜¤ (ê¹”ë”/ê¸°ë³¸)</option>
                    <option value="'GmarketSansBold', sans-serif">Gë§ˆì¼“ ì‚°ìŠ¤ (ê°•ì¡°/ì œëª©)</option>
                    <option value="'Black Han Sans', sans-serif">ë¸”ë™ í•œ ì‚°ìŠ¤ (ê°•ë ¥í•œ ì„íŒ©íŠ¸)</option>
                    <option value="'Do Hyeon', sans-serif">ë„í˜„ì²´ (ë¶€ë“œëŸ¬ìš´ ê°•ì¡°)</option>
                    <option value="'Jua', sans-serif">ì£¼ì•„ì²´ (ë‘¥ê¸€ë‘¥ê¸€/ê·€ì—¬ìš´)</option>
                    <option value="'Nanum Myeongjo', serif">ë‚˜ëˆ”ëª…ì¡° (ê²©ì‹/ê°ì„±)</option>
                    <option value="'Noto Sans KR', sans-serif">ë³¸ê³ ë”• (ì„¸ë ¨ëœ/í‘œì¤€)</option>
                </select>
            </div>

            <div class="control-group">
                <label>ìƒ‰ìƒ ì„¤ì •</label>
                <div class="color-group">
                    <div class="color-item">
                        <div class="color-row">
                            <input type="color" id="bg-color-picker" value="#000000">
                            <input type="text" id="bg-color" value="#000000" class="color-input" maxlength="7">
                        </div>
                        <span class="color-label">ë°°ê²½ìƒ‰</span>
                    </div>
                    <div class="color-item">
                        <div class="color-row">
                            <input type="color" id="text-color-picker" value="#ede02a">
                            <input type="text" id="text-color" value="#ede02a" class="color-input" maxlength="7">
                        </div>
                        <span class="color-label">ê¸€ì”¨ìƒ‰</span>
                    </div>
                    <div class="color-item">
                        <div class="color-row">
                            <input type="color" id="border-color-picker" value="#ede02a">
                            <input type="text" id="border-color" value="#ede02a" class="color-input" maxlength="7">
                        </div>
                        <span class="color-label">í…Œë‘ë¦¬ìƒ‰</span>
                    </div>
                </div>
            </div>

            <div class="control-group">
                <label>í˜•ê´‘ ì»¬ëŸ¬ íŒ”ë ˆíŠ¸</label>
                <div class="palette-grid">
                    <button class="palette-btn" data-color="#ede02a" style="background: #ede02a;"></button>
                    <button class="palette-btn" data-color="#00e676" style="background: #00e676;"></button>
                    <button class="palette-btn" data-color="#ff1744" style="background: #ff1744;"></button>
                    <button class="palette-btn" data-color="#ff9100" style="background: #ff9100;"></button>
                    <button class="palette-btn" data-color="#00e5ff" style="background: #00e5ff;"></button>
                    <button class="palette-btn" data-color="#e040fb" style="background: #e040fb;"></button>
                    <button class="palette-btn" data-color="#76ff03" style="background: #76ff03;"></button>
                    <button class="palette-btn" data-color="#ff4081" style="background: #ff4081;"></button>
                </div>
            </div>

            <div class="control-group">
                <label>ë¬¸ì ì •ë ¬</label>
                <div class="align-grid">
                    <div>
                        <label style="margin-bottom:6px;">ê°€ë¡œ ì •ë ¬</label>
                        <select id="text-align" class="select">
                            <option value="center" selected>ê°€ìš´ë°</option>
                            <option value="left">ì™¼ìª½</option>
                            <option value="right">ì˜¤ë¥¸ìª½</option>
                        </select>
                    </div>
                    <div>
                        <label style="margin-bottom:6px;">ì„¸ë¡œ ì •ë ¬</label>
                        <select id="vertical-align" class="select">
                            <option value="middle" selected>ê°€ìš´ë°</option>
                            <option value="top">ìœ„</option>
                            <option value="bottom">ì•„ë˜</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="control-group">
                <label>í…ìŠ¤íŠ¸ ì—¬ë°±: <span class="range-value" id="text-padding-value">60px</span></label>
                <input type="range" id="text-padding" min="0" max="200" value="60">
            </div>

            <div class="control-group">
                <label>í°íŠ¸ í¬ê¸°: <span class="range-value" id="font-size-value">100px</span></label>
                <input type="range" id="font-size" min="30" max="200" value="100">
            </div>

            <div class="control-group">
                <label>í°íŠ¸ êµµê¸°: <span class="range-value" id="font-weight-value">900</span></label>
                <input type="range" id="font-weight" min="100" max="900" step="100" value="900">
            </div>

            <div class="control-group">
                <label>ì¤„ ê°„ê²©: <span class="range-value" id="line-height-value">1.5</span></label>
                <input type="range" id="line-height" min="0.8" max="2.5" step="0.1" value="1.5">
            </div>

            <div class="control-group">
                <label>í…Œë‘ë¦¬ ë‘ê»˜: <span class="range-value" id="border-width-value">15px</span></label>
                <input type="range" id="border-width" min="0" max="50" value="15">
            </div>

            <div class="button-group" style="display:flex; gap:10px;">
                <button class="btn-reset" onclick="resetSettings()">ì´ˆê¸°í™”</button>
            </div>
        </div>

        <div class="panel preview-panel">
            <h1>ğŸ–¼ï¸ ë¯¸ë¦¬ë³´ê¸°</h1>
            <canvas id="preview-canvas" width="800" height="800"></canvas>
            <div class="button-group">
                <button class="btn-download" onclick="downloadThumbnail()">ë‹¤ìš´ë¡œë“œ (WebP)</button>
            </div>
            <div class="alt-tag">
                <div class="alt-tag-label">ìƒì„±ëœ ALT íƒœê·¸:</div>
                <div class="alt-tag-text" id="alt-tag-text">ì¸ë„¤ì¼ ì´ë¯¸ì§€</div>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('preview-canvas');
        const ctx = canvas.getContext('2d');

        // ìš”ì†Œ ì°¸ì¡°
        const textInput = document.getElementById('text-input');
        const fontFamily = document.getElementById('font-family');
        const bgColor = document.getElementById('bg-color');
        const textColor = document.getElementById('text-color');
        const borderColor = document.getElementById('border-color');
        const bgColorPicker = document.getElementById('bg-color-picker');
        const textColorPicker = document.getElementById('text-color-picker');
        const borderColorPicker = document.getElementById('border-color-picker');
        const textAlign = document.getElementById('text-align');
        const verticalAlign = document.getElementById('vertical-align');
        const textPadding = document.getElementById('text-padding');
        const fontSize = document.getElementById('font-size');
        const fontWeight = document.getElementById('font-weight');
        const lineHeight = document.getElementById('line-height');
        const borderWidth = document.getElementById('border-width');

        const fontSizeValue = document.getElementById('font-size-value');
        const fontWeightValue = document.getElementById('font-weight-value');
        const lineHeightValue = document.getElementById('line-height-value');
        const borderWidthValue = document.getElementById('border-width-value');
        const textPaddingValue = document.getElementById('text-padding-value');
        const altTagText = document.getElementById('alt-tag-text');

        let activeColorInput = null;

        // ì´ˆê¸°í™” ë° ì´ë²¤íŠ¸ ì—°ê²°
        window.onload = () => {
            document.fonts.ready.then(() => updatePreview());
        };

        [textInput, fontFamily, textAlign, verticalAlign].forEach(el => 
            el.addEventListener('change', updatePreview));
        
        [textInput, textPadding, fontSize, fontWeight, lineHeight, borderWidth].forEach(el => 
            el.addEventListener('input', () => {
                updateLabels();
                updatePreview();
            }));

        // ì»¬ëŸ¬ ì—…ë°ì´íŠ¸ ë¡œì§
        function updateLabels() {
            fontSizeValue.textContent = fontSize.value + 'px';
            fontWeightValue.textContent = fontWeight.value;
            lineHeightValue.textContent = lineHeight.value;
            borderWidthValue.textContent = borderWidth.value + 'px';
            textPaddingValue.textContent = textPadding.value + 'px';
        }

        // ì»¬ëŸ¬ í”¼ì»¤ ë° HEX ì…ë ¥ ì‹±í¬
        function syncColor(picker, hex, type) {
            picker.addEventListener('input', () => { hex.value = picker.value.toUpperCase(); updatePreview(); });
            hex.addEventListener('input', () => { if(/^#[0-9A-F]{6}$/i.test(hex.value)) { picker.value = hex.value; updatePreview(); }});
            hex.addEventListener('focus', () => activeColorInput = hex);
            picker.addEventListener('focus', () => activeColorInput = hex);
        }
        syncColor(bgColorPicker, bgColor);
        syncColor(textColorPicker, textColor);
        syncColor(borderColorPicker, borderColor);

        // íŒ”ë ˆíŠ¸ ë²„íŠ¼
        document.querySelectorAll('.palette-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const color = btn.dataset.color;
                if(activeColorInput) {
                    activeColorInput.value = color.toUpperCase();
                    if(activeColorInput === bgColor) bgColorPicker.value = color;
                    if(activeColorInput === textColor) textColorPicker.value = color;
                    if(activeColorInput === borderColor) borderColorPicker.value = color;
                } else {
                    textColor.value = color.toUpperCase();
                    textColorPicker.value = color;
                    borderColor.value = color.toUpperCase();
                    borderColorPicker.value = color;
                }
                updatePreview();
            });
        });

        function updatePreview() {
            const lines = textInput.value.split('\n');
            const bw = parseInt(borderWidth.value);
            const fs = parseInt(fontSize.value);
            const fw = fontWeight.value;
            const lh = parseFloat(lineHeight.value);
            const pad = parseInt(textPadding.value);
            const font = fontFamily.value;

            // ë°°ê²½ ê·¸ë¦¬ê¸°
            ctx.fillStyle = bgColor.value;
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // í…Œë‘ë¦¬ ê·¸ë¦¬ê¸°
            if (bw > 0) {
                ctx.strokeStyle = borderColor.value;
                ctx.lineWidth = bw;
                ctx.strokeRect(bw/2, bw/2, canvas.width - bw, canvas.height - bw);
            }

            // í…ìŠ¤íŠ¸ ì„¤ì •
            ctx.fillStyle = textColor.value;
            ctx.font = `${fw} ${fs}px ${font}`;
            ctx.textBaseline = 'middle';

            // ê°€ë¡œ ìœ„ì¹˜ ê³„ì‚°
            let x = canvas.width / 2;
            if (textAlign.value === 'left') {
                ctx.textAlign = 'left';
                x = pad + bw;
            } else if (textAlign.value === 'right') {
                ctx.textAlign = 'right';
                x = canvas.width - pad - bw;
            } else {
                ctx.textAlign = 'center';
            }

            // ì„¸ë¡œ ìœ„ì¹˜ ê³„ì‚°
            const totalTextHeight = lines.length * fs * lh;
            let startY;
            if (verticalAlign.value === 'top') {
                startY = pad + bw + (fs * lh / 2);
            } else if (verticalAlign.value === 'bottom') {
                startY = canvas.height - pad - bw - totalTextHeight + (fs * lh / 2);
            } else {
                startY = (canvas.height - totalTextHeight) / 2 + (fs * lh / 2);
            }

            // ì¤„ë³„ ë Œë”ë§
            lines.forEach((line, i) => {
                ctx.fillText(line, x, startY + (i * fs * lh));
            });

            // Alt íƒœê·¸ ì—…ë°ì´íŠ¸
            const cleanText = textInput.value.replace(/\n/g, ' ').trim();
            altTagText.textContent = cleanText ? `${cleanText} - ë¸”ë¡œê·¸ ì¸ë„¤ì¼` : "ì¸ë„¤ì¼ ì´ë¯¸ì§€";
        }

        function downloadThumbnail() {
            const link = document.createElement('a');
            link.download = `thumbnail-${Date.now()}.webp`;
            link.href = canvas.toDataURL('image/webp', 0.9);
            link.click();
        }

        function resetSettings() {
            textInput.value = "PSN ì¹´ë“œ\nì˜¤ë¥˜ ë!\nì§€ê¸ˆ ëëƒ„";
            fontFamily.value = "'NanumSquareNeo', sans-serif";
            bgColor.value = "#000000";
            textColor.value = "#EDE02A";
            borderColor.value = "#EDE02A";
            bgColorPicker.value = "#000000";
            textColorPicker.value = "#EDE02A";
            borderColorPicker.value = "#EDE02A";
            fontSize.value = 100;
            borderWidth.value = 15;
            textAlign.value = "center";
            verticalAlign.value = "middle";
            updateLabels();
            updatePreview();
        }
    </script>
</body>
</html>
